<h4 id="mybond_calculator">Calculator</h4>

<div id="calculator_alert" class="alert alert-danger fade show hidden" role="alert">
    <strong>Error</strong>
    <span id="calculator_alert_content"></span>
</div>

<form class="form needs-validation" novalidate">
  <span id="calculator_host" class="hidden">
    <%= "#{ENV['who_am_i']}/calculator" %>
  </span>

  <h4>Calculations</h4>
  <ol>
    <li>X Example 1 - New Bond</li>
    <li>Example 2 - Existing Bond</li>
  </ol>

  <h4>Results</h4>
  <ol>
    <li>X Example 1 - results</li>
    <li>Example 2 - results</li>
  </ol>

  <div class="row form-group">
    <div class="col-lg-6">
      <%= label_tag :rental_status %>
    </div>
    <div class="col-lg-6">
      <select class="form-control" id='calculator_rental_type'>
        <option value="0">I have a new lease and want a Rental Bond Facility</option>
        <option value="1">I have an existing Rental Bond that I would like to sell</option>
      </select>
    </div>
  </div>

  <!--
  <div id="calculator_previous_bond_amount_row" class="row form-group hidden">
    <div class="col-lg-6">
      <%= label_tag :previous_bond_amount %>
    </div>
    <div class="col-lg-6">
      <%= number_field_tag :previous_bond_amount, 0, id: 'previous_bond_amount', class: 'form-control', min: 0, step: 1 %>
    </div>
  </div>
  -->

  <div id="calculator_months_until_expiry_row" class="row form-group hidden">
    <div class="col-lg-6">
      <%= label_tag :months_left_on_lease %>
      <br>
      <!-- <small class="text-muted">
        <i>
          If your lease has less than 3 months to go, please contact us
        </i>
      </small> -->
    </div>
    <div class="col-lg-6">
      <select class="form-control" id='calculator_months_until_expiry'>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8" selected>8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
      </select>
    </div>
  </div>


  <div class="row form-group">
    <div class="col-lg-6">
      <%= label_tag :property_weeky_rent %>
    </div>
    <div class="col-lg-6">
      <%#= number_field_tag :property_weekly_rent, "", placeholder: 600, id: 'calculator_property_weekly_rent', class: 'form-control', min: 0, step: 1, required: true %>
      <%= number_field_tag :property_weekly_rent, 600, placeholder: 600, id: 'calculator_property_weekly_rent', class: 'form-control', min: 0, step: 1, required: true %>
      <div class="invalid-feedback">
          Please input a valid weekly rent.
      </div>
    </div>
  </div>


  <div class="row form-group">
    <div class="col-lg-6">
      <%= label_tag :your_bond_amount %>
    </div>
    <div class="col-lg-6">
      <%#= number_field_tag :bond_amount, "", placeholder: 2400, id: 'calculator_bond_amount', class: 'form-control', min: 0, step: 1, required: true %>
      <%= number_field_tag :bond_amount, 2400, placeholder: 2400, id: 'calculator_bond_amount', class: 'form-control', min: 0, step: 1, required: true %>
      <div class="invalid-feedback">
          Please input a valid Rental Bond Amount.
      </div>
    </div>
  </div>

  <div class="row form-group">
    <div class="col-lg-6">
      <%= label_tag :property_postcode %>
    </div>
    <div class="col-lg-6">
      <%#= number_field_tag :property_postcode, "", placeholder: 2000, id: 'calculator_property_postcode', class: 'form-control', min: 2000, max: 2999, step: 1, required: true %>
      <%= number_field_tag :property_postcode, 2000, placeholder: 2000, id: 'calculator_property_postcode', class: 'form-control', min: 2000, max: 2999, step: 1, required: true %>
      <div class="invalid-feedback">
          Please input a valid NSW Postcode.
      </div>
    </div>
  </div>


  <div class="row form-group">
    <div class="col-lg-6">
      <%= label_tag :start_of_lease %>
    </div>
    <div class="col-lg-6">
      <%= text_field_tag :start_of_lease, "", as: :string, type: :text, class: "form-control calculator_start_date_picker" %>
    </div>
  </div>

  <div class="row form-group">
    <div class="col-lg-6">
      <%= label_tag :end_of_lease %>
    </div>
    <div class="col-lg-6">
      <%= text_field_tag :end_of_lease, "", as: :string, type: :text, class: "form-control calculator_end_date_picker" %>
    </div>
  </div>

  <div class="row form-group hidden" id="calculator_rolling_lease_row">
    <div class="col-lg-6">
      <label>
        My lease has expired and I am on a rolling monthly lease
      </label>
    </div>
    <div class="col-lg-6">
      <label class="switch">
        <input type="checkbox" value="1" id="calculator_rolling_lease">
        <span class="slider round"></span>
      </label>    </div>
  </div>


  <div class="row form-group" id="calculator_button_row">
    <div class="col-lg-12">
      <button id="calculator_button" type="button" class="btn btn-info float-right">Calculate</button>
    </div>
  </div>

  <div id="calculator_results_new_bond" class="hidden">
    <hr>
    <div class="row form-group">
      <div class="col-lg-6">
        <%= label_tag :establishment_fee %>
      </div>
      <div class="col-lg-6">
        <span id="calculator_establishment_fee"></span>
      </div>
    </div>

    <div class="row form-group">
      <div class="col-lg-6">
        <%= label_tag :weekly_rent %>
      </div>
      <div class="col-lg-6">
        <span id="calculator_weekly_rent"></span>
      </div>
    </div>

    <div class="row form-group">
      <div class="col-lg-6">
        <%= label_tag :total_fee %>
      </div>
      <div class="col-lg-6">
        <span id="calculator_total_fee"></span>
      </div>
    </div>

    <div class="row form-group">
      <div class="col-md-12 col-lg-7">
        <button id="calculator_apply_new_bond" type="button" class="btn btn-success float-right">Apply Now!</button>
      </div>
    </div>

    <div class="row form-group">
      <div class="col-lg-12">
        <hr>
      </div>
    </div>

    <div class="row justify-content-center">
      <div class="col-auto">


        <h4>Bond Buy Back Schedule</h4>

        <p>You can buy back your bond at any time</p>

        <table class="table table-striped table-responsive">
          <thead>
            <tr>
              <th>Month</th>
              <th>Buy Back Amount</th>
              <th>Cost</th>
            </tr>
          </thead>
          <tbody id="calculator_new_bond_buy_back_schedule">
          </tbody>
        </table>

      </div>
    </div>

  </div>

  <div id="calculator_results_existing_bond" class="hidden">
    <hr>
  </div>


<div id="calculator_results" class="hidden">

  <hr>

  <div id="calculator_cash_back_row" class="row form-group">
    <div class="col-lg-6">
      <%= label_tag :cash_back %>
    </div>
    <div class="col-lg-6">
      <span id="calculator_cash_back"></span>
    </div>
  </div>


  <div id="calculator_deposit_row" class="row form-group">
    <div class="col-lg-6">
      <%= label_tag :deposit %>
    </div>
    <div class="col-lg-6">
      <span id="calculator_deposit"></span>
    </div>
  </div>

  <div id="calculator_total_row" class="row form-group">
    <div class="col-lg-6">
      <%= label_tag :total_payment %>
    </div>
    <div class="col-lg-6">
      <span id="calculator_total"></span>
    </div>
  </div>


  <hr>
  <h4>Bond Bridging</h4>

  <div class="row form-group">
    <div class="col-lg-6">
      <p>
        You can buy back your bond at any time within a 2 month period.
      </p>
    </div>
    <div class="col-lg-6">
      <span id="calculator_buy_back_bond_amount"></span>
    </div>
  </div>

  <h4>The Factor Factor</h4>

  <div class="row form-group">
    <div class="col-lg-12">
      <p>
        If you decide not buy back your bond, the bond will be converted into a Factor.
      </p>

      <p>
        In practice, this means
      </p>

      <ul class="text-muted">
        <li>You assign the bond to My Bond</li>
        <li>When the lease is over you must repay the Factor (the full amount of the bond)
        <li>You are able to renew the factor for an annual fee of <strong><span id="calculator_annual_fee"></span></strong>
        <li>Or you can renew the factor on a monthly basis for <strong><span id="calculator_monthly_fee"></span></strong> per month</li>
        <li>You can choose to buy back the bond at any time</li>
      </ul>
    </div>
  </div>

  <div class="row form-group">
    <div class="col-lg-12">
      <p>
        Bond Buy Back Schedule
      </p>
      <div id="calculator_bond_buy_back_schedule">
      </div>
    </div>
  </div>

</div>

</form>
